## MySQL的分库分表
为了解决单一数据库的瓶颈，在使用数据库主从复制，即主数据库写，从数据库读取数据这种架构
依然不能满足使用需求时，可以进行数据库分库分表操作。

### 分库分表的几种方式
1. 把一个实例中的多个数据库拆分到多个不同的实例中
无法处理数据库的写入压力

2. 把一个库中的表分离到不同的数据库中
即垂直拆分，将示例中的不同表拆分道不同的示例上，主要是解决单一实例中表的数量太多

3. 数据库分片，水平拆分
对一个库中的相关表进行水平拆分到不同实例的数据库中。

#### 数据库分片前的准备
1. 如何选择分区键
    * 分区键要能尽量避免跨分片查询的发生
    * 分区键要能尽量使得各个分区中的数据平均

2. 如何存储无须分片的表
    * 每个分片中存储一份相同的数据
    * 使用额外的节点统一存储

3. 如何在节点上部署分片
    * 每个分片使用单一数据库，并且数据库名也相同
    * 将一个分片表存储在一个数据库中，并且在表名上加入分片号后缀
    * 在一个节点中部署多个数据库，每个数据库中包含一个分片

4. 如何分配分片中的数据
    * 按分区键的Hash值取模来分配分片数据
    * 按分区键的范围来分配分片数据
    * 利用分区键和分片的映射表来分配分片数据
    
5. 如何生成全局唯一ID
    * 使用auto_increment_increment和auto_increment_offset参数
    只能用于一个节点中只能有一个分区表的情形
    * 使用一个全局节点来生成ID
    * 在Redis等缓存服务器中创建全局ID
    * 使用ZK生成全局唯一ID
    
    
    
