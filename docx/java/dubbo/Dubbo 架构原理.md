# Dubbo 架构原理

## Dubbo 核心功能
1. Remoting：远程通讯，提供多种 NIO 框架的抽象封装，包括"同步转异步"和"请求-响应"模式的信息交换方式；
2. Cluster：服务框架，提供基于接口方法的透明远程过程调用，包括多协议支持，以及软负载均衡，失败容错，地址路由，动态配置等集群支持；
3. Registry：服务注册中心，基于注册中间目录服务，使服务消费方能动态的查找服务提供方，使地址透明，使得服务提供方可以平滑的增加或者减少机器。

## Dubbo 组件角色
### 角色
1. Provider：暴露服务的服务提供方，启动时向注册中心注册自己提供的服务；
2. Consumer：调用远程服务的服务消费方，启动时向注册中心订阅自己需要的服务，从地址提供者列表中基于软负载均衡算法，选一台提供者进行调用，如果调用失败，再选另一台调用；
3. Registry：服务注册与发现的注册中心，返回服务提供者地址列表给消费者，如果有变更，注册中心将基于长连接推送变更数据给消费者；
4. Monitor：统计服务的调用次数和调用时间的监控中心；
5. Container：服务运行容器，负责启动、加载，运行服务提供者。

### 工作流程
1. 容器启动；
2. Provider 启动时注册服务地址；
3. Consumer 启动时订阅服务地址；
4. 变更时推送服务地址列表；
5. 随机调用一个服务地址；
6. 后台定时采集服务调用次数和调用时间等信息。